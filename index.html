<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>İstinat Duvarı Donatı Hesabı</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .input-group {
      margin-bottom: 10px;
    }
    label {
      display: block;
      font-weight: bold;
    }
    input {
      padding: 5px;
      width: 100px;
    }
    svg {
      border: 1px solid #aaa;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2>İstinat Duvarı Donatı Hesaplama</h2>

  <div class="input-group">
    <label>Duvar Yüksekliği (cm):</label>
    <input type="number" id="height" value="300">
  </div>

  <div class="input-group">
    <label>Duvar Genişliği (cm):</label>
    <input type="number" id="width" value="500">
  </div>

  <div class="input-group">
    <label>Donatı Aralığı (cm):</label>
    <input type="number" id="spacing" value="20">
  </div>

  <div class="input-group">
    <label>Donatı Çapı (mm):</label>
    <input type="number" id="diameter" value="12">
  </div>

  <button onclick="hesaplaVeCiz()">Hesapla ve Çiz</button>

  <svg id="cizim" width="800" height="600"></svg>

  <p id="sonuc"></p>

  <script>
    function hesaplaVeCiz() {
      const height = parseInt(document.getElementById('height').value);
      const width = parseInt(document.getElementById('width').value);
      const spacing = parseInt(document.getElementById('spacing').value);
      const diameter = parseInt(document.getElementById('diameter').value);

      const svg = document.getElementById('cizim');
      svg.innerHTML = '';
      const scale = 1;
      const offsetX = 50;
      const offsetY = 50;

      const duvarY = height * scale;
      const duvarX = width * scale;

      // Duvarı çiz
      const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
      rect.setAttribute('x', offsetX);
      rect.setAttribute('y', offsetY);
      rect.setAttribute('width', duvarX);
      rect.setAttribute('height', duvarY);
      rect.setAttribute('fill', '#ddd');
      rect.setAttribute('stroke', '#000');
      svg.appendChild(rect);

      // Düşey donatıları çiz
      const adetDusey = Math.floor(width / spacing);
      for (let i = 0; i < adetDusey; i++) {
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        const x = offsetX + i * spacing;
        line.setAttribute('x1', x);
        line.setAttribute('y1', offsetY);
        line.setAttribute('x2', x);
        line.setAttribute('y2', offsetY + duvarY);
        line.setAttribute('stroke', 'red');
        line.setAttribute('stroke-width', 2);
        svg.appendChild(line);
      }

      // Yatay donatıları çiz
      const adetYatay = Math.floor(height / spacing);
      for (let i = 0; i < adetYatay; i++) {
        const y = offsetY + i * spacing;
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('x1', offsetX);
        line.setAttribute('y1', y);
        line.setAttribute('x2', offsetX + duvarX);
        line.setAttribute('y2', y);
        line.setAttribute('stroke', 'blue');
        line.setAttribute('stroke-width', 2);
        svg.appendChild(line);
      }

      // Hesaplama
      const toplamDusey = adetDusey * height / 100; // metre cinsinden
      const toplamYatay = adetYatay * width / 100;
      const toplamMetre = toplamDusey + toplamYatay;

      const kgPerMeter = (Math.PI * Math.pow(diameter / 10, 2)) / 4 * 7.85;
      const toplamKg = toplamMetre * kgPerMeter;

      document.getElementById('sonuc').innerHTML = `
        <strong>Düşey donatı adedi:</strong> ${adetDusey}<br>
        <strong>Yatay donatı adedi:</strong> ${adetYatay}<br>
        <strong>Toplam demir uzunluğu:</strong> ${toplamMetre.toFixed(2)} m<br>
        <strong>Yaklaşık ağırlık:</strong> ${toplamKg.toFixed(2)} kg
      `;
    }
  </script>
</body>
</html>