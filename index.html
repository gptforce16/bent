<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>İstinat Duvarı Donatı Hesaplama</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 700px; margin: auto; }
    label { display: block; margin-top: 10px; }
    input { padding: 5px; width: 100%; }
    button { margin-top: 15px; padding: 10px; width: 100%; background: #4caf50; color: white; border: none; }
    #sonuc { margin-top: 20px; padding: 10px; background: #f9f9f9; }
    svg { border: 1px solid #ccc; margin-top: 20px; background: #f1f1f1; }
  </style>
</head>
<body>
  <h2>İstinat Duvarı Donatı Hesaplayıcı + Çizim</h2>

  <label for="yukseklik">Duvar Yüksekliği (cm):</label>
  <input type="number" id="yukseklik" required>

  <label for="uzunluk">Duvar Uzunluğu (cm):</label>
  <input type="number" id="uzunluk" required>

  <button onclick="hesapla()">Hesapla ve Çiz</button>

  <div id="sonuc"></div>
  <div id="cizim"></div>

  <script>
    function hesapla() {
      const yukseklik = parseFloat(document.getElementById("yukseklik").value);
      const uzunluk = parseFloat(document.getElementById("uzunluk").value);

      if (isNaN(yukseklik) || isNaN(uzunluk) || yukseklik <= 0 || uzunluk <= 0) {
        alert("Geçerli değerler giriniz.");
        return;
      }

      const aralik = 10; // cm
      const demirCapi = 12; // mm
      const birimAgirlik = 0.888; // kg/m for Ø12

      const adet = Math.floor(uzunluk / aralik);
      const boyMetre = yukseklik / 100;
      const toplamMetraj = adet * boyMetre;
      const toplamAgirlik = toplamMetraj * birimAgirlik;

      document.getElementById("sonuc").innerHTML = `
        <h3>Sonuçlar:</h3>
        <p><strong>Demir çapı:</strong> Ø${demirCapi} mm</p>
        <p><strong>Demir aralığı:</strong> ${aralik} cm</p>
        <p><strong>Toplam demir adedi:</strong> ${adet} adet</p>
        <p><strong>Her çubuğun boyu:</strong> ${boyMetre.toFixed(2)} m</p>
        <p><strong>Toplam demir metrajı:</strong> ${toplamMetraj.toFixed(2)} m</p>
        <p><strong>Toplam demir ağırlığı:</strong> ${toplamAgirlik.toFixed(2)} kg</p>
      `;

      // ÇİZİM - Ölçekli SVG
      const svgWidth = 600;
      const svgHeight = 400;
      const scaleX = svgWidth / uzunluk;
      const scaleY = svgHeight / yukseklik;

      let svg = `<svg width="${svgWidth}" height="${svgHeight}" xmlns="http://www.w3.org/2000/svg">`;
      svg += `<rect x="0" y="0" width="${svgWidth}" height="${svgHeight}" fill="#e6e6e6" stroke="#999"/>`;

      for (let i = 0; i < adet; i++) {
        const x = i * aralik * scaleX;
        svg += `<line x1="${x}" y1="0" x2="${x}" y2="${svgHeight}" stroke="red" stroke-width="2"/>`;
      }

      svg += `<text x="10" y="20" font-size="14" fill="black">Duvar Çizimi (ölçekli değil)</text>`;
      svg += `</svg>`;

      document.getElementById("cizim").innerHTML = svg;
    }
  </script>
</body>
</html>
