<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gelişmiş Betonarme Duvar Hesaplama</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --background-color: #f5f5f5;
            --card-color: #ffffff;
            --text-color: #333333;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .card {
            background-color: var(--card-color);
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: var(--secondary-color);
        }
        
        .result-item {
            margin-bottom: 10px;
            padding: 15px;
            background-color: #e8f4fc;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
        }
        
        .result-value {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .canvas-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        
        .canvas-wrapper {
            flex: 1;
            min-width: 300px;
        }
        
        canvas {
            width: 100%;
            height: 400px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
        }
        
        .opening-inputs {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .opening-input {
            flex: 1;
            min-width: 200px;
        }
        
        @media (max-width: 768px) {
            .canvas-container {
                flex-direction: column;
            }
            
            .opening-input {
                min-width: 100%;
            }
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 15px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #eee;
            border: none;
            border-radius: 4px 4px 0 0;
            margin-right: 5px;
        }
        
        .tab.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        #3d-container {
            width: 100%;
            height: 400px;
            position: relative;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gelişmiş Betonarme Duvar Hesaplama Aracı</h1>
        
        <div class="card">
            <h2>Giriş Bilgileri</h2>
            
            <div class="input-group">
                <label for="length">Duvar Uzunluğu (m):</label>
                <input type="number" id="length" step="0.01" min="0.1" value="5.0">
            </div>
            
            <div class="input-group">
                <label for="height">Duvar Yüksekliği (m):</label>
                <input type="number" id="height" step="0.01" min="0.1" value="3.0">
            </div>
            
            <div class="input-group">
                <label for="thickness">Duvar Kalınlığı (cm):</label>
                <input type="number" id="thickness" step="1" min="10" value="20">
            </div>
            
            <div class="input-group">
                <label for="steel-diameter">Donatı Çapı (mm):</label>
                <input type="number" id="steel-diameter" step="1" min="8" value="12">
            </div>
            
            <div class="input-group">
                <label for="horizontal-spacing">Yatay Donatı Aralığı (cm):</label>
                <input type="number" id="horizontal-spacing" step="1" min="10" value="20">
            </div>
            
            <div class="input-group">
                <label for="vertical-spacing">Düşey Donatı Aralığı (cm):</label>
                <input type="number" id="vertical-spacing" step="1" min="10" value="20">
            </div>
            
            <div class="input-group">
                <label>Boşluklar (Açıklıklar):</label>
                <div class="opening-inputs">
                    <div class="opening-input">
                        <label for="opening1-width">1. Boşluk Genişlik (cm):</label>
                        <input type="number" id="opening1-width" step="1" min="10" value="50">
                    </div>
                    <div class="opening-input">
                        <label for="opening1-height">1. Boşluk Yükseklik (cm):</label>
                        <input type="number" id="opening1-height" step="1" min="10" value="50">
                    </div>
                </div>
                <div class="opening-inputs">
                    <div class="opening-input">
                        <label for="opening2-width">2. Boşluk Genişlik (cm):</label>
                        <input type="number" id="opening2-width" step="1" min="10" value="50">
                    </div>
                    <div class="opening-input">
                        <label for="opening2-height">2. Boşluk Yükseklik (cm):</label>
                        <input type="number" id="opening2-height" step="1" min="10" value="100">
                    </div>
                </div>
            </div>
            
            <button onclick="calculate()">Hesapla ve Çiz</button>
        </div>
        
        <div class="card">
            <h2>Hesaplama Sonuçları</h2>
            <div id="results"></div>
        </div>
        
        <div class="card">
            <h2>Görselleştirme</h2>
            
            <div class="tab-container">
                <button class="tab active" onclick="openTab('2d-view')">2D Görünüm</button>
                <button class="tab" onclick="openTab('3d-view')">3D Görünüm</button>
                <button class="tab" onclick="openTab('rebar-details')">Donatı Detayları</button>
            </div>
            
            <div id="2d-view" class="tab-content active">
                <div class="canvas-container">
                    <div class="canvas-wrapper">
                        <h3>Ön Görünüm</h3>
                        <canvas id="frontCanvas"></canvas>
                    </div>
                    <div class="canvas-wrapper">
                        <h3>Kesit Görünüm</h3>
                        <canvas id="sectionCanvas"></canvas>
                    </div>
                </div>
            </div>
            
            <div id="3d-view" class="tab-content">
                <div id="3d-container"></div>
            </div>
            
            <div id="rebar-details" class="tab-content">
                <div class="canvas-container">
                    <div class="canvas-wrapper">
                        <h3>Yatay Donatı Detayı</h3>
                        <canvas id="horizontalRebarCanvas"></canvas>
                    </div>
                    <div class="canvas-wrapper">
                        <h3>Düşey Donatı Detayı</h3>
                        <canvas id="verticalRebarCanvas"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 3D sahne için global değişkenler
        let scene, camera, renderer, controls;
        
        function calculate() {
            // Giriş değerlerini al
            const length = parseFloat(document.getElementById('length').value);
            const height = parseFloat(document.getElementById('height').value);
            const thickness = parseFloat(document.getElementById('thickness').value) / 100; // cm'den m'ye çevir
            const steelDiameter = parseFloat(document.getElementById('steel-diameter').value);
            const horizontalSpacing = parseFloat(document.getElementById('horizontal-spacing').value) / 100; // cm'den m'ye çevir
            const verticalSpacing = parseFloat(document.getElementById('vertical-spacing').value) / 100; // cm'den m'ye çevir
            
            // Boşluk bilgilerini al
            const opening1Width = parseFloat(document.getElementById('opening1-width').value) / 100;
            const opening1Height = parseFloat(document.getElementById('opening1-height').value) / 100;
            const opening2Width = parseFloat(document.getElementById('opening2-width').value) / 100;
            const opening2Height = parseFloat(document.getElementById('opening2-height').value) / 100;
            
            // Pas payı (2.5 cm)
            const cover = 0.025;
            
            // Hesaplamalar
            // Beton hacmi (m³) - boşluklar çıkarılarak
            const wallArea = length * height;
            const openingsArea = (opening1Width * opening1Height) + (opening2Width * opening2Height);
            const concreteVolume = (wallArea - openingsArea) * thickness;
            
            // Donatı hesabı
            // Yatay donatı sayısı (boşlukların üstüne ve altına donatı ekleniyor)
            const horizontalBars = Math.ceil(height / horizontalSpacing) + 1;
            // Düşey donatı sayısı (boşlukların sağına ve soluna donatı ekleniyor)
            const verticalBars = Math.ceil(length / verticalSpacing) + 1;
            
            // Toplam donatı uzunluğu (m)
            // Yatay donatılar boşlukların etrafında devam ediyor
            const totalHorizontalLength = horizontalBars * length;
            // Düşey donatılar boşlukların etrafında devam ediyor
            const totalVerticalLength = verticalBars * height;
            const totalSteelLength = totalHorizontalLength + totalVerticalLength;
            
            // Donatı ağırlığı (kg) - Çelik yoğunluğu: 7850 kg/m³
            const steelWeight = totalSteelLength * (Math.PI * Math.pow(steelDiameter/1000, 2)/4) * 7850;
            
            // Kalıp alanı (m²) - boşluklar çıkarılarak
            const formworkArea = 2 * (wallArea - openingsArea);
            
            // Sonuçları göster
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="result-item">
                    <span>Beton Hacmi:</span>
                    <span class="result-value">${concreteVolume.toFixed(2)} m³</span>
                </div>
                <div class="result-item">
                    <span>Toplam Donatı Uzunluğu:</span>
                    <span class="result-value">${totalSteelLength.toFixed(2)} m</span>
                </div>
                <div class="result-item">
                    <span>Donatı Ağırlığı:</span>
                    <span class="result-value">${steelWeight.toFixed(2)} kg</span>
                </div>
                <div class="result-item">
                    <span>Yatay Donatı Sayısı:</span>
                    <span class="result-value">${horizontalBars} adet</span>
                </div>
                <div class="result-item">
                    <span>Düşey Donatı Sayısı:</span>
                    <span class="result-value">${verticalBars} adet</span>
                </div>
                <div class="result-item">
                    <span>Kalıp Alanı:</span>
                    <span class="result-value">${formworkArea.toFixed(2)} m²</span>
                </div>
                <div class="result-item">
                    <span>Pas Payı:</span>
                    <span class="result-value">2.5 cm</span>
                </div>
            `;
            
            // Çizimleri yap
            drawFrontView(length, height, thickness, horizontalBars, verticalBars, 
                        opening1Width, opening1Height, opening2Width, opening2Height);
            drawSectionView(length, thickness, horizontalBars, cover);
            drawRebarDetails(steelDiameter);
            init3DView(length, height, thickness, opening1Width, opening1Height, opening2Width, opening2Height);
        }
        
        function drawFrontView(length, height, thickness, horizontalBars, verticalBars, 
                              opening1Width, opening1Height, opening2Width, opening2Height) {
            const canvas = document.getElementById('frontCanvas');
            const ctx = canvas.getContext('2d');
            
            // Canvas boyutlarını ayarla
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // Ölçek faktörü - duvarı canvas'a sığdırmak için
            const scaleX = (canvas.width - 40) / length;
            const scaleY = (canvas.height - 40) / height;
            const scale = Math.min(scaleX, scaleY);
            
            // Merkezleme için offset
            const offsetX = (canvas.width - length * scale) / 2;
            const offsetY = (canvas.height - height * scale) / 2;
            
            // Temizle
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Duvar çerçevesi
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.strokeRect(offsetX, offsetY, length * scale, height * scale);
            
            // Duvar içi (beton)
            ctx.fillStyle = 'rgba(170, 170, 170, 0.5)';
            ctx.fillRect(offsetX, offsetY, length * scale, height * scale);
            
            // Boşlukları çiz
            // Boşluklar duvarın üst kısmında, yan yana
            const opening1X = offsetX + (length/3 - opening1Width/2) * scale;
            const opening1Y = offsetY + 0.2 * height * scale;
            
            const opening2X = offsetX + (2*length/3 - opening2Width/2) * scale;
            const opening2Y = offsetY + 0.2 * height * scale;
            
            // 1. Boşluk
            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.fillRect(opening1X, opening1Y, opening1Width * scale, opening1Height * scale);
            ctx.strokeStyle = '#e74c3c';
            ctx.strokeRect(opening1X, opening1Y, opening1Width * scale, opening1Height * scale);
            
            // 2. Boşluk
            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.fillRect(opening2X, opening2Y, opening2Width * scale, opening2Height * scale);
            ctx.strokeStyle = '#e74c3c';
            ctx.strokeRect(opening2X, opening2Y, opening2Width * scale, opening2Height * scale);
            
            // Donatıları çiz
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 1;
            
            // Yatay donatılar
            const horizontalSpacing = height / (horizontalBars - 1);
            for (let i = 0; i < horizontalBars; i++) {
                const y = offsetY + i * horizontalSpacing * scale;
                
                // Boşlukların olduğu bölgede donatıları kesikli çiz
                if (y > opening1Y && y < opening1Y + opening1Height * scale && 
                    y > opening2Y && y < opening2Y + opening2Height * scale) {
                    ctx.setLineDash([5, 5]);
                } else {
                    ctx.setLineDash([]);
                }
                
                ctx.beginPath();
                ctx.moveTo(offsetX, y);
                ctx.lineTo(offsetX + length * scale, y);
                ctx.stroke();
            }
            
            // Düşey donatılar
            const verticalSpacing = length / (verticalBars - 1);
            for (let i = 0; i < verticalBars; i++) {
                const x = offsetX + i * verticalSpacing * scale;
                
                // Boşlukların olduğu bölgede donatıları kesikli çiz
                if ((x > opening1X && x < opening1X + opening1Width * scale) || 
                    (x > opening2X && x < opening2X + opening2Width * scale)) {
                    ctx.setLineDash([5, 5]);
                } else {
                    ctx.setLineDash([]);
                }
                
                ctx.beginPath();
                ctx.moveTo(x, offsetY);
                ctx.lineTo(x, offsetY + height * scale);
                ctx.stroke();
            }
            
            // Ölçüleri yaz
            ctx.setLineDash([]);
            ctx.fillStyle = '#000';
            ctx.font = '12px Arial';
            
            // Uzunluk ölçüsü
            ctx.fillText(`${length.toFixed(2)} m`, offsetX + length * scale / 2 - 30, offsetY + height * scale + 20);
            
            // Yükseklik ölçüsü
            ctx.save();
            ctx.translate(offsetX - 20, offsetY + height * scale / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText(`${height.toFixed(2)} m`, 0, 0);
            ctx.restore();
            
            // Boşluk ölçüleri
            ctx.fillText(`${(opening1Width*100).toFixed(0)}x${(opening1Height*100).toFixed(0)} cm`, 
                        opening1X + opening1Width * scale / 2 - 30, opening1Y + opening1Height * scale / 2);
            
            ctx.fillText(`${(opening2Width*100).toFixed(0)}x${(opening2Height*100).toFixed(0)} cm`, 
                        opening2X + opening2Width * scale / 2 - 30, opening2Y + opening2Height * scale / 2);
        }
        
        function drawSectionView(length, thickness, horizontalBars, cover) {
            const canvas = document.getElementById('sectionCanvas');
            const ctx = canvas.getContext('2d');
            
            // Canvas boyutlarını ayarla
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // Ölçek faktörü
            const scaleX = (canvas.width - 40) / length;
            const scaleY = (canvas.height - 40) / (thickness * 5); // Kalınlığı daha görünür yapmak için
            
            // Merkezleme için offset
            const offsetX = (canvas.width - length * scaleX) / 2;
            const offsetY = (canvas.height - thickness * scaleY) / 2;
            
            // Temizle
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Kesit çizgisi (üst)
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(offsetX, offsetY);
            ctx.lineTo(offsetX + length * scaleX, offsetY);
            ctx.stroke();
            
            // Kesit çizgisi (alt)
            ctx.beginPath();
            ctx.moveTo(offsetX, offsetY + thickness * scaleY);
            ctx.lineTo(offsetX + length * scaleX, offsetY + thickness * scaleY);
            ctx.stroke();
            
            // Tarama çizgileri
            ctx.strokeStyle = 'rgba(170, 170, 170, 0.7)';
            ctx.lineWidth = 1;
            for (let y = offsetY + 5; y < offsetY + thickness * scaleY; y += 10) {
                ctx.beginPath();
                ctx.moveTo(offsetX, y);
                ctx.lineTo(offsetX + length * scaleX, y);
                ctx.stroke();
            }
            
            // Donatıları çiz (kesitte nokta olarak görünecek)
            const verticalSpacing = length / (horizontalBars - 1);
            ctx.fillStyle = '#e74c3c';
            
            for (let i = 0; i < horizontalBars; i++) {
                const x = offsetX + i * verticalSpacing * scaleX;
                
                // Üst donatı (pas payı dikkate alınarak)
                ctx.beginPath();
                ctx.arc(x, offsetY + cover * scaleY, 3, 0, Math.PI * 2);
                ctx.fill();
                
                // Alt donatı (pas payı dikkate alınarak)
                ctx.beginPath();
                ctx.arc(x, offsetY + thickness * scaleY - cover * scaleY, 3, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Ölçüleri yaz
            ctx.fillStyle = '#000';
            ctx.font = '12px Arial';
            
            // Kalınlık ölçüsü
            ctx.fillText(`${(thickness*100).toFixed(0)} cm`, offsetX + length * scaleX + 10, offsetY + thickness * scaleY / 2);
            
            // Pas payı gösterimi
            ctx.strokeStyle = '#2ecc71';
            ctx.setLineDash([2, 2]);
            ctx.lineWidth = 1;
            
            // Üst pas payı
            ctx.beginPath();
            ctx.moveTo(offsetX, offsetY);
            ctx.lineTo(offsetX, offsetY + cover * scaleY);
            ctx.lineTo(offsetX + 20, offsetY + cover * scaleY);
            ctx.stroke();
            
            // Alt pas payı
            ctx.beginPath();
            ctx.moveTo(offsetX, offsetY + thickness * scaleY);
            ctx.lineTo(offsetX, offsetY + thickness * scaleY - cover * scaleY);
            ctx.lineTo(offsetX + 20, offsetY + thickness * scaleY - cover * scaleY);
            ctx.stroke();
            
            ctx.fillText(`Pas Payı: ${(cover*100).toFixed(1)} cm`, offsetX + 25, offsetY + thickness * scaleY / 2);
        }
        
        function drawRebarDetails(steelDiameter) {
            const horizontalCanvas = document.getElementById('horizontalRebarCanvas');
            const verticalCanvas = document.getElementById('verticalRebarCanvas');
            
            const hCtx = horizontalCanvas.getContext('2d');
            const vCtx = verticalCanvas.getContext('2d');
            
            // Canvas boyutlarını ayarla
            horizontalCanvas.width = horizontalCanvas.offsetWidth;
            horizontalCanvas.height = horizontalCanvas.offsetHeight;
            
            verticalCanvas.width = verticalCanvas.offsetWidth;
            verticalCanvas.height = verticalCanvas.offsetHeight;
            
            // Yatay donatı detayı
            drawSingleRebar(hCtx, horizontalCanvas.width, horizontalCanvas.height, steelDiameter, true);
            
            // Düşey donatı detayı
            drawSingleRebar(vCtx, verticalCanvas.width, verticalCanvas.height, steelDiameter, false);
        }
        
        function drawSingleRebar(ctx, width, height, diameter, isHorizontal) {
            // Temizle
            ctx.clearRect(0, 0, width, height);
            
            // Ölçek
            const scale = Math.min(width, height) / 200;
            
            // Merkez koordinatları
            const centerX = width / 2;
            const centerY = height / 2;
            
            // Donatı çiz
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = diameter / 2;
            
            if (isHorizontal) {
                // Yatay donatı
                const length = width * 0.8;
                const startX = centerX - length / 2;
                const endX = centerX + length / 2;
                
                ctx.beginPath();
                ctx.moveTo(startX, centerY);
                ctx.lineTo(endX, centerY);
                ctx.stroke();
                
                // Gönye uçları (20 cm)
                const hookLength = 20 * scale;
                
                // Sol gönye
                ctx.beginPath();
                ctx.moveTo(startX, centerY);
                ctx.lineTo(startX, centerY - hookLength);
                ctx.stroke();
                
                // Sağ gönye
                ctx.beginPath();
                ctx.moveTo(endX, centerY);
                ctx.lineTo(endX, centerY + hookLength);
                ctx.stroke();
                
                // Ölçüler
                ctx.fillStyle = '#000';
                ctx.font = '12px Arial';
                ctx.fillText(`${diameter} mm φ`, centerX - 20, centerY - 30);
                ctx.fillText("20 cm", startX - 30, centerY - hookLength / 2);
                ctx.fillText("20 cm", endX + 10, centerY + hookLength / 2);
            } else {
                // Düşey donatı
                const length = height * 0.8;
                const startY = centerY - length / 2;
                const endY = centerY + length / 2;
                
                ctx.beginPath();
                ctx.moveTo(centerX, startY);
                ctx.lineTo(centerX, endY);
                ctx.stroke();
                
                // Gönye uçları (20 cm)
                const hookLength = 20 * scale;
                
                // Üst gönye
                ctx.beginPath();
                ctx.moveTo(centerX, startY);
                ctx.lineTo(centerX + hookLength, startY);
                ctx.stroke();
                
                // Alt gönye
                ctx.beginPath();
                ctx.moveTo(centerX, endY);
                ctx.lineTo(centerX - hookLength, endY);
                ctx.stroke();
                
                // Ölçüler
                ctx.fillStyle = '#000';
                ctx.font = '12px Arial';
                ctx.save();
                ctx.translate(centerX + 30, centerY);
                ctx.rotate(-Math.PI / 2);
                ctx.fillText(`${diameter} mm φ`, 0, 0);
                ctx.restore();
                
                ctx.fillText("20 cm", centerX + hookLength / 2, startY - 10);
                ctx.fillText("20 cm", centerX - hookLength / 2, endY + 20);
            }
            
            // Nervür işaretleri
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 1;
            
            if (isHorizontal) {
                for (let x = centerX - width * 0.3; x <= centerX + width * 0.3; x += 15) {
                    ctx.beginPath();
                    ctx.moveTo(x, centerY - diameter);
                    ctx.lineTo(x, centerY + diameter);
                    ctx.stroke();
                }
            } else {
                for (let y = centerY - height * 0.3; y <= centerY + height * 0.3; y += 15) {
                    ctx.beginPath();
                    ctx.moveTo(centerX - diameter, y);
                    ctx.lineTo(centerX + diameter, y);
                    ctx.stroke();
                }
            }
        }
        
        function init3DView(length, height, thickness, opening1Width, opening1Height, opening2Width, opening2Height) {
            const container = document.getElementById('3d-container');
            container.innerHTML = ''; // Önceki içeriği temizle
            
            // Sahne oluştur
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf0f0f0);
            
            // Kamera oluştur
            camera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
            camera.position.set(length * 0.8, height * 0.8, length * 0.8);
            
            // Renderer oluştur
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.offsetWidth, container.offsetHeight);
            container.appendChild(renderer.domElement);
            
            // Kontroller ekle
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            
            // Işık ekle
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(1, 1, 1);
            scene.add(directionalLight);
            
            // Eksenler (debug için)
            const axesHelper = new THREE.AxesHelper(Math.max(length, height, thickness) * 1.5);
            scene.add(axesHelper);
            
            // Duvar oluştur
            createWall(length, height, thickness, opening1Width, opening1Height, opening2Width, opening2Height);
            
            // Render döngüsü
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(scene, camera);
            }
            
            animate();
            
            // Pencere boyutu değiştiğinde ayarla
            window.addEventListener('resize', function() {
                camera.aspect = container.offsetWidth / container.offsetHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.offsetWidth, container.offsetHeight);
            });
        }
        
        function createWall(length, height, thickness, opening1Width, opening1Height, opening2Width, opening2Height) {
            // Ana duvar geometrisi
            const wallGeometry = new THREE.BoxGeometry(length, height, thickness);
            
            // Boşluklar için geometriler
            const opening1Geometry = new THREE.BoxGeometry(opening1Width, opening1Height, thickness * 1.1);
            const opening2Geometry = new THREE.BoxGeometry(opening2Width, opening2Height, thickness * 1.1);
            
            // Boşluk pozisyonları (duvarın üst kısmında)
            const opening1Position = new THREE.Vector3(
                length/3 - opening1Width/2,
                height/2 - opening1Height/2 - height*0.1,
                0
            );
            
            const opening2Position = new THREE.Vector3(
                2*length/3 - opening2Width/2,
                height/2 - opening2Height/2 - height*0.1,
                0
            );
            
            // Boolean operasyonları için BSP kullanımı
            // Three.js'in built-in boolean operasyonları yok, bu yüzden basit bir yaklaşım kullanıyoruz
            // Gerçek bir projede ThreeCSG gibi bir kütüphane kullanılmalı
            
            // Duvar malzemesi
            const wallMaterial = new THREE.MeshPhongMaterial({
                color: 0xaaaaaa,
                side: THREE.DoubleSide,
                transparent: true,
                opacity: 0.7
            });
            
            // Boşluk malzemesi (görünmez)
            const openingMaterial = new THREE.MeshBasicMaterial({
                color: 0x000000,
                visible: false
            });
            
            // Duvar ve boşluklar için meshler oluştur
            const wallMesh = new THREE.Mesh(wallGeometry, wallMaterial);
            const opening1Mesh = new THREE.Mesh(opening1Geometry, openingMaterial);
            const opening2Mesh = new THREE.Mesh(opening2Geometry, openingMaterial);
            
            // Boşlukları konumlandır
            opening1Mesh.position.copy(opening1Position);
            opening2Mesh.position.copy(opening2Position);
            
            // Sahneye ekle
            scene.add(wallMesh);
            scene.add(opening1Mesh);
            scene.add(opening2Mesh);
            
            // Donatıları oluştur
            createRebars(length, height, thickness);
        }
        
        function createRebars(length, height, thickness) {
            // Basitçe donatıları temsil eden çizgiler çizelim
            const rebarMaterial = new THREE.LineBasicMaterial({ color: 0xff0000 });
            
            // Yatay donatılar
            const horizontalSpacing = 0.2; // 20 cm
            const horizontalBars = Math.ceil(height / horizontalSpacing);
            
            for (let i = 0; i <= horizontalBars; i++) {
                const y = -height/2 + i * horizontalSpacing;
                
                const points = [];
                points.push(new THREE.Vector3(-length/2, y, -thickness/2 + 0.025));
                points.push(new THREE.Vector3(length/2, y, -thickness/2 + 0.025));
                
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const line = new THREE.Line(geometry, rebarMaterial);
                scene.add(line);
            }
            
            // Düşey donatılar
            const verticalSpacing = 0.2; // 20 cm
            const verticalBars = Math.ceil(length / verticalSpacing);
            
            for (let i = 0; i <= verticalBars; i++) {
                const x = -length/2 + i * verticalSpacing;
                
                const points = [];
                points.push(new THREE.Vector3(x, -height/2, -thickness/2 + 0.025));
                points.push(new THREE.Vector3(x, height/2, -thickness/2 + 0.025));
                
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const line = new THREE.Line(geometry, rebarMaterial);
                scene.add(line);
            }
        }
        
        function openTab(tabName) {
            // Tüm tab içeriklerini gizle
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            // Tüm tab butonlarını pasif yap
            const tabButtons = document.getElementsByClassName('tab');
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove('active');
            }
            
            // Seçilen tab'ı aktif yap
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
            
            // 3D görünüm aktifse render boyutunu güncelle
            if (tabName === '3d-view' && renderer) {
                const container = document.getElementById('3d-container');
                renderer.setSize(container.offsetWidth, container.offsetHeight);
                camera.aspect = container.offsetWidth / container.offsetHeight;
                camera.updateProjectionMatrix();
            }
        }
        
        // Sayfa yüklendiğinde varsayılan değerlerle hesapla
        window.onload = function() {
            calculate();
            
            // Mobil cihaz kontrolü
            if (/Mobi|Android/i.test(navigator.userAgent)) {
                alert('Mobil cihazınızda en iyi deneyim için yatay modda kullanmanız önerilir.');
            }
        };
        
        // Pencere boyutu değiştiğinde canvas'ları yeniden boyutlandır
        window.addEventListener('resize', function() {
            const frontCanvas = document.getElementById('frontCanvas');
            const sectionCanvas = document.getElementById('sectionCanvas');
            const horizontalRebarCanvas = document.getElementById('horizontalRebarCanvas');
            const verticalRebarCanvas = document.getElementById('verticalRebarCanvas');
            
            if (frontCanvas) {
                calculate(); // Tüm çizimleri yenile
            }
        });
    </script>
</body>
</html>